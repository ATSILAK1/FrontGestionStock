<div class="flex justify-content-center">
  <p-dialog
    header="Modifier Produit"
    [modal]="true"
    [(visible)]="isVisible"
    [style]="{ width: '30rem' }"
  >
    <form
      [formGroup]="produitForm"
      (ngSubmit)="updateForm()"
      class="p-4 bg-light"
    >
      <div class="form-group">
        <label for="prix">Prix</label>
        <input
          id="prix"
          type="text"
          formControlName="prix"
          class="form-control"
          [ngClass]="{
            'is-invalid':
              produitForm.get('prix')?.invalid &&
              produitForm.get('prix')?.touched
          }"
        />
        <div
          *ngIf="
            produitForm.get('prix')?.invalid && produitForm.get('prix')?.touched
          "
          class="invalid-feedback"
        >
          Veuillez entrer un prix valide.
        </div>
      </div>

      <div class="form-group">
        <label for="nom">Nom</label>
        <input
          id="nom"
          type="text"
          formControlName="nom"
          class="form-control"
          [ngClass]="{
            'is-invalid':
              produitForm.get('nom')?.invalid && produitForm.get('nom')?.touched
          }"
        />
        <div
          *ngIf="
            produitForm.get('nom')?.invalid && produitForm.get('nom')?.touched
          "
          class="invalid-feedback"
        >
          Veuillez entrer un nom valide.
        </div>
      </div>

      <div class="form-group">
        <label for="description">Description</label>
        <textarea
          id="description"
          formControlName="description"
          class="form-control"
          rows="3"
          [ngClass]="{
            'is-invalid':
              produitForm.get('description')?.invalid &&
              produitForm.get('description')?.touched
          }"
        ></textarea>
        <div
          *ngIf="
            produitForm.get('description')?.invalid &&
            produitForm.get('description')?.touched
          "
          class="invalid-feedback"
        >
          Veuillez entrer une description valide (max. 512 caractères).
        </div>
      </div>

      <div class="form-group">
        <label for="quantite">Quantité</label>
        <input
          id="quantite"
          type="number"
          formControlName="quantite"
          class="form-control"
          [ngClass]="{
            'is-invalid':
              produitForm.get('quantite')?.invalid &&
              produitForm.get('quantite')?.touched
          }"
        />
        <div
          *ngIf="
            produitForm.get('quantite')?.invalid &&
            produitForm.get('quantite')?.touched
          "
          class="invalid-feedback"
        >
          Veuillez entrer une quantité valide (>= 0).
        </div>
      </div>

      <div class="text-right mt-4">
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="produitForm.invalid"
        >
          Enregistrer
        </button>
      </div>
    </form>
  </p-dialog>
</div>
